---
author: Veritasium
date: '2022-06-30'
guest: ''
layout: post.njk
source: https://www.youtube.com/watch?v=iSNsgj1OCLA
speaker: Veritasium
tags:
  - veritasium
  - 100-prisoners-problem
  - probability-theory
  - counterintuitive-logic
  - loop-strategy
  - combinatorics
title: 即使知道答案也看似不可能的谜题：100囚犯问题
summary: 本文深入探讨了著名的“100囚犯问题”，这是一个反直觉的数学谜题。在随机选择的情况下，所有囚犯获释的概率微乎其微，但通过巧妙的循环策略，成功率可提升至惊人的30%以上。文章详细解释了该策略的数学原理，包括循环结构、概率计算以及当囚犯数量趋于无限时，成功率如何逼近1减自然对数2的极限。
insight: ''
draft: true
series: ''
category: science
area: personal-systems
project:
  - systems-thinking
  - personal-growth-lab
people:
  - Peter Bro Miltersen
  - Matt Parker
companies_orgs:
  - Brilliant
  - Veritasium
products_models: []
media_books:
  - perplexing probability course
  - joy of problem solving course
status: evergreen
---
### 挑战直觉的囚犯谜题

有一个谜题，它的反直觉程度之高，即使你已经知道了答案，仍然会觉得它似乎是错的。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">There is a riddle that
is so counterintuitive,
it still seems wrong even
if you know the answer.</p>
</details>

有人可能会觉得这几乎是一个不可能的数字。也有人会感觉这就像是真相的炸弹。如果你试图制造争议并迷惑人们，你一定会成功。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">- You'd think it's an
almost impossible number.
- I feel like you probably
hit me with some truth bomb.
- I mean, if you're trying
to create controversy
and you're trying to confuse people,
you're gonna succeed.
(both laughs)</p>
</details>

关于这个谜题，网上有很多YouTube视频，但我发现它们要么不准确，要么不完整。因此，在这段视频中，我将深入探讨并全面解释它。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">There are a bunch of
YouTube videos about it,
but I find all of them either
incorrect or incomplete.
So in this video, I'm going to dive deeper
and explain it fully.</p>
</details>

下面是谜题的设定。假设有100名囚犯，编号从1到100。写有他们各自号码的纸条被随机放入一个密封房间内的100个盒子中。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Here is the setup.
(suspenseful music)
Say there are 100 prisoners
numbered 1 to 100.
Slips of paper containing
each of their numbers
are randomly placed in 100
boxes in a sealed room.</p>
</details>

囚犯们被允许一个接一个地进入房间，打开100个盒子中的任意50个，寻找自己的号码。之后，他们必须让房间恢复原样，并且不能以任何方式与其他囚犯交流。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">One at a time, each prisoner
is allowed to enter the room
and open any 50 of the 100 boxes,
searching for their number.
And afterwards, they must leave the room
exactly as they found it,
and they can't communicate in any way
with the other prisoners.</p>
</details>

如果所有100名囚犯都在轮到自己进入房间时找到了自己的号码，他们都将被释放。但如果其中任何一人未能找到自己的号码，他们都将被处决。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">If all 100 prisoners find their own number
during their turn in the room,
they will all be freed.
But if even one of them
fails to find their number,
they will all be executed.</p>
</details>

囚犯们被允许在任何人进入房间之前制定策略。那么，他们最好的策略是什么呢？

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">The prisoners are allowed to strategize
before any of them goes into the room.
So what is their best strategy?</p>
</details>

### 随机策略与惊人的低概率

如果每位囚犯都随机寻找自己的号码，那么每位囚犯找到自己号码的概率是50%。因此，所有100名囚犯都找到自己号码的概率是1/2乘以1/2，重复100次，即1/2的100次方。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">If they each search for
their own number randomly,
then each prisoner has a
50% chance of finding it.
So the probability that all 100
prisoners find their numbers
is 1/2 times 1/2 times 1/2 a hundred times
or 1/2 to the power of 100.</p>
</details>

这个概率等于0.00000000（30个零），然后是8。为了更好地理解这个概率，可以想象一下：两个人从地球上所有的海滩和沙漠中挑选出同一粒沙子的机会，都比通过这种方式逃脱的机会要大。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">This is equal to 0.00000000 30 zeros,
and then an eight.
To put this probability into perspective,
two people have a better
chance of picking out
the same grain of sand from all
the beaches and deserts on earth
than by escaping this way.</p>
</details>

但是，如果我告诉你，通过正确的策略，他们将有机会把成功率提高到接近三分之一呢？这使得他们的成功几率比随机选择提高了近30个数量级。这就像把一毫米的长度放大到可观测宇宙的直径一样。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">But what have I told you
that with the right strategy,
there's a way to raise their
chances to nearly one in three.
It improves their odds of a random chance
by nearly 30 orders of magnitude.
That's like taking a
millimeter and scaling it up
to the diameter of the
observable universe.</p>
</details>

有人问道：“但他们只能提前协调这个策略，对吗？”“没错。”“这是真的吗？”“是的。”“教教我！”

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">- But they can only coordinate
this strategy beforehand.
- Correct?
- Is this true?
- Yes.
- Teach me.</p>
</details>

这不是一个脑筋急转弯。这个解决方案只涉及数学的一个不可思议的特性。那么，这个数学策略是什么呢？

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">This is not a trick question.
The solution just involves an
incredible feature of math.
So what is this mathematical strategy?</p>
</details>

如果你还不知道答案，可以随时暂停视频，自己尝试一下。如果你想不出来，别担心，你并不孤单。就连提出这个谜题的人，计算机科学家**彼得·布罗·米尔特森**（Peter Bro Miltersen: 丹麦计算机科学家，以其在计算复杂性理论和密码学方面的贡献而闻名），在一位同事指出这个策略之前，他自己也没有想到。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Well, if you don't
already know the answer,
feel free to pause the video
here and try it for yourself.
And if you don't come
up with it, don't worry,
you're in good company.
Even the person who came
up with this riddle,
computer scientist Peter Bro Miltersen,
he didn't even think of this strategy
until a colleague pointed it out.</p>
</details>

米尔特森最终在一篇论文中发表了这个问题，并慷慨地将解决方案留作读者的练习。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Miltersen, ultimately published
this problem in a paper
where he generously left the solution
as an exercise for the reader.</p>
</details>

### 循环策略：反直觉的解决方案

那么，解决方案来了。假设你是一名囚犯，当你进入房间时，打开标有你号码的盒子。里面的纸条上的号码可能不是你的，但这没关系。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So here is the solution.
Pretend you are one of the prisoners,
when you go into the room,
open the box with your number on it,
the number on the slip inside
probably won't be yours,
but that's okay.</p>
</details>

然后，去打开标有那个号码的盒子，查看里面的号码，再打开标有那个号码的盒子，依此类推。一直这样做，直到你找到写有你号码的纸条。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Go to the box with that number on it.
look at the number inside,
then go to the box with that
number on it, and so on.
Keep doing this until you find
the slip with your number.</p>
</details>

如果你找到了自己的号码，这基本上就告诉你回到你开始的那个盒子。它关闭了你一直追踪的数字循环。但如果你找到了自己的号码，你就完成了。你可以停止并离开房间。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">If you find your number,
that essentially tells you
to go back to the box where you started.
It closes the loop of numbers
you've been following.
But if you've found your
number, then you're done.
You can stop and leave the room.</p>
</details>

这个简单的策略使得所有囚犯找到自己号码的几率超过30%。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">This simple strategy
gives over a 30% chance
that all the prisoners
will find their number.</p>
</details>

“整个群体有30%的机会……”“所有人在31%的时间里都能找到自己的号码。”“什么？”

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">- The entire pool has a 30...
- Everyone can find their
number 31% of the time.
- What?</p>
</details>

### 循环策略的数学原理

但是它是如何运作的呢？首先要注意的是，所有的盒子都成为了一个**闭环**（closed loop: 在数学和计算机科学中，指一系列相互连接的元素，最终回到起点）。最简单的循环是一个盒子包含它自己的号码。如果你是1号囚犯，你打开1号盒子，里面是1号纸条，那么你就完成了。你的号码是长度为1的循环的一部分。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">But how does it work?
The first thing to
notice is that all boxes
become part of a closed loop.
The simplest loop would be
a box that contains its own number.
If you're prisoner number
one and you go to box one,
it contains slip one, then you're done.
Your number was part of a loop of one,</p>
</details>

但你也可以有一个长度为2的循环。假设1号盒子指向7号盒子，而7号盒子又指回1号盒子。或者你可以有一个长度为3、4、5的循环，或者任何长度，一直到100。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">but you could also have a loop of two.
Say box one points to box seven
and box seven points back to box one.
Or you could have a loop
of three, or four, or five,
or any length all the way up to 100.</p>
</details>

你可能拥有的最长循环会将所有号码连接成一个单一的循环。但更普遍的是，这些盒子中纸条的任何随机排列都会导致一些较短和一些较长循环的混合。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">The longest loop you
could have would connect
all the numbers in a single loop.
But more generally, any random arrangement
of the slips in these boxes
will result in a mixture of some shorter
and some longer loops.</p>
</details>

当你从标有你号码的盒子开始时，你被保证处于包含你纸条的循环中。所以，决定你是否找到纸条的关键是循环的长度。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">When you start with a box
labeled with your number,
you are guaranteed to be on the loop
that includes your slip.
So the thing that
determines whether or not
you find your slip is
the length of the loop.</p>
</details>

如果你的号码是长度小于50的循环的一部分，那么你肯定会找到你的纸条。但是，如果你的号码是长度为51或更长的循环的一部分，你就有麻烦了。在用尽允许搜索的50个盒子之前，你将无法找到它。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">If your number is part of a
loop that is shorter than 50,
then you will definitely find your slip.
But if your number is part of
a loop that is 51 or longer,
you are in trouble.
You won't find it before you've exhausted
the 50 boxes you're allowed to search.</p>
</details>

当你打开标有你号码的盒子时，你实际上是从循环中离你的纸条最远的点开始的。你想知道指向这个盒子的纸条在哪里，但要找到它，你必须沿着数字循环一直走到最后。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">When you open the box
labeled with your number,
you are in fact starting
at the farthest point on
the loop from your slip.
You wanna know where is the
slip that points to this box,
but to find it, you have to
follow the loop of numbers
all the way around to the end.</p>
</details>

这意味着，如果囚犯们遵循这个策略，并且最长的循环是51，那么不仅仅是一两个囚犯找不到自己的号码，而是这个循环中的所有51名囚犯都无法成功。他们会到达包含自己纸条的盒子之前的那个盒子，但他们必须在那里停止搜索。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">That means if the prisoners
follow this strategy
and the longest loop is 51,
not just one or two prisoners
will fail to find their number,
but all 51 on this loop won't make it.
They make it to the box just
before the box with their slip,
but they have to stop searching there.
(both laughs)</p>
</details>

因此，所有囚犯成功的概率仅仅是100个号码的随机排列中不包含任何长度超过50的循环的概率。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So the probability that all
of the prisoners succeed
is just the probability
that a random arrangement
of a hundred numbers contains
no loops longer than 50.</p>
</details>

### 概率计算：1/N规则

现在我承诺这个概率会接近三分之一，但我们如何计算它呢？想象一下，写下所有不同的方式，你可以连接100个盒子形成一个长度为100的循环。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Now I promised that this
probability would come out
to around one in three,
but how do we calculate it?
Well, imagine writing down
all the different ways
that you could connect
100 boxes to form a loop
of length 100.</p>
</details>

所以你可以有1号盒子指向2号盒子，2号盒子指向3号盒子，依此类推，一直到100号，然后100号盒子指回1号盒子。或者你可以有随机的连接：5号盒子指向99号盒子，99号盒子指向17号盒子，依此类推，最后一个是63号。然后63号盒子指回5号盒子。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So you could have box
one points to box two,
box two points to box three
to box four, and so on,
all the way to 100,
and then box 100 would
point back to box one,
or you could have something random.
Box five points to box
99 to box 17 and so on,
and let's pick the last one,
is 63.
And box 63 points back to box five.</p>
</details>

那么，这100个盒子的不同排列或**置换**（permutation: 在数学中，指从给定集合中取出若干元素进行排列，其顺序不同的排列方式）有多少种呢？对于第一个盒子，我有100个不同的盒子可以选择。第二个盒子，因为我已经用了一个，所以我只能从99个盒子中选择。下一个，我可以从98个盒子中选择，依此类推，直到最后一个盒子。我没有真正的选择，只剩下一个盒子可以放在最后一个位置。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So how many different arrangements
of these a hundred boxes
or permutations could you have?
Well, for the first box,
I have 100 different boxes
that I could choose from.
The second box, because
I've already used one,
I can only pick from 99 boxes,
and the next one, I can pick
from 98 boxes, and so on,
down to the very last box.
I don't really have a choice.
There's only one box left I
could put in the last position.</p>
</details>

所以不同置换的总数将是100乘以99乘以98乘以97，一直乘到1。这正是**100的阶乘**（100 factorial: 表示从1乘到100的所有正整数的积）。你可以用100的阶乘种不同的方式来创建一个100个盒子的循环。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So the total number of
different permutations
would be 100 times 99, times 98, times 97,
all the way down to one.
That is just 100 factorial.
There are 100 factorial different ways
that you could create a
loop of a hundred boxes.</p>
</details>

但我们不能忘记，这些不仅仅是数字的直线排列，它们是循环。所以，一些看起来不同的排列实际上是同一个循环。例如，2、3、4、5一直到100，然后是1，与1、2、3、4、5一直到100是相同的。你可以用100种不同的方式重新排列这些数字的写法，但它们都代表同一个循环。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">But what we can't forget
is that these are not
just lines of numbers.
They are loops.
So some of these lines that look different
are actually the same loop.
For example, two, three,
four, five, and so on
up to 100 and then 1
is the same thing as 1, 2, 3, 4, 5 to 100.
You can rearrange the way
you write these numbers
a hundred different ways,
but they all represent the same loop.</p>
</details>

所以，长度为100的独特循环的总数是100的阶乘除以100。那么，任何随机排列的100个盒子包含长度为100的循环的概率是多少呢？它就等于我们刚刚计算的独特循环的数量（100的阶乘除以100），除以将100张纸条放入100个盒子中的总方式数，即100的阶乘。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So the total number of
unique loops of length 100
is 100 factorial divided by 100.
So what is the probability that any
random arrangement of 100 boxes
will contain a loop of length 100?
Well, it's just equal to the
number of unique such loops
that we just calculated,
100 factorial over 100,
divided by the total number of ways
that you could put a
hundred slips in 100 boxes,
which is 100 factorial.</p>
</details>

所以答案是1/100。因此，随机排列的纸条导致长度为100的循环的概率是1%。这是一个普遍的结果。你得到长度为99的循环的概率是1/99。你得到长度为98的循环的概率是1/98。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So the answer is 1 over 100.
So there is a 1% chance that
a random arrangement of slips
results in a loop of length 100,
and this is a general result.
The probability that you
get a loop of length 99
is 1 over 99.
The probability that you
get a loop of length 98
is 1 over 98.</p>
</details>

所以，存在长度超过50的循环的概率是1/51加上1/52加上1/53，等等。把所有这些加起来，结果是0.69。这意味着囚犯们有69%的失败几率，也就是31%的成功几率，即最长循环的长度是50或更短。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So the probability that there
is a loop longer than 50
is 1 over 51 plus 1 over 52
plus one over 53, et cetera.
Add all these up, and it equals .69.
There is a 69% chance of
failure for the prisoners,
meaning a 31% chance of success
where the longest loop is 50 or shorter.</p>
</details>

“我仍然觉得难以置信。”“这感觉有点像魔法。”使用循环策略，所有囚犯找到自己号码的可能性比仅仅两名囚犯随机选择的可能性还要大。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">- I still find it difficult to believe.
- [Derek] This feels a bit like magic.
Using the loop strategy,
all the prisoners are more
likely to find their numbers
than even just two prisoners
choosing at random.</p>
</details>

那么，使用循环策略，每个囚犯单独找到自己号码的概率是多少呢？仍然是50%。每个囚犯仍然只能打开一半的盒子，所以他们单独的几率仍然是1/2，但这些概率不再相互独立。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So using the loop strategy,
what is the probability
that each prisoner alone
finds their number?
It is still 50%.
Each prisoner can still
only open half the boxes,
so their individual chance is still 1/2,
but these probabilities
are no longer independent of each other.</p>
</details>

想象一下，将这个实验进行一千次。如果每个人都随机猜测，你预计在大多数运行中，大约有50名囚犯能找到自己的号码。在幸运的情况下，这个数字会高一点；在不幸运的情况下，会低一点。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Imagine running this experiment
a thousand times over.
If everyone is guessing randomly,
you'd expect that on most
runs around 50 prisoners
would find their number.
On lucky runs, the number
would be a bit higher,
on unlucky runs, a bit lower.</p>
</details>

但使用循环策略，所有囚犯将在31%的时间里找到自己的号码。而在69%的时间里，少于50人找到自己的号码。囚犯们要么一起赢，要么大多数一起输。这就是这个策略的运作方式。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">But using the loop strategy,
all of the prisoners
would find their numbers
31% of the time.
And 69% of the time, fewer
than 50 find their number.
The prisoners all win together
or the majority loses together.
That's how this strategy works.</p>
</details>

### 解答常见疑问

有人问道：“你为什么假设你的号码总会在你所在的循环中呢？”“我感觉……”“我不明白。”“这是一个关键问题，对吧？”“因为我感觉有可能开始后进入一个完整的循环，但却没有回到自己的号码，因为你进入了错误的循环，然后你必须进入另一个循环，所以我不知道我是否会相信这个。”“对，对，对，对，对，对。”

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">- Why are you assuming that
your number will always be
on the loop that you're on?
- I feel like-
- I don't understand that.
- This is a key question, right?
- 'Cause I feel like
it's possible to start
and go on a complete loop
and not come back to your own number
because you got on the wrong loop
and then you'd have to
get on another loop,
so I don't know that I'd buy this.
- Right, right, right, right, right, right.</p>
</details>

现在，每个人都会问的一个大问题是：你怎么知道如果你从一个标有你号码的盒子开始，你就一定会在包含你纸条的循环中呢？

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Now, the big question everyone asks is
how do you know that if you start
with a box with your number on it
you are guaranteed to be on the loop
that contains your slip?</p>
</details>

如果你仔细想想，写着73号的纸条，如果任何人看到它，他们肯定会去73号盒子。所以，写有相同号码的纸条和盒子本质上形成了一个单元。它们就像一块乐高积木。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Well, if you think about it,
the slip that says 73,
if anyone sees that,
they will definitely go to
the box with the number 73.
So the slip and box with the same number
essentially form a unit.
They're like a little Lego brick.</p>
</details>

然后，每张纸条都藏在另一个盒子里面。所以，当我随机放置纸条和盒子时，你会看到我们不可能遇到死胡同。你不可能走到一个盒子然后就停下来，因为每个盒子都包含一张纸条，而那张纸条又指向另一个盒子。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">And then every slip is
hidden inside another box.
So as I start laying out
slips and boxes randomly,
you can see that there's no way
that we can end up with a dead end.
It's not like you can just
get to a box and then stop
because every box contains a slip
and that points at another box.</p>
</details>

所以，当你走进房间时，唯一能看到所有盒子的方式是每张纸条都包含在一个盒子中，这必然意味着我们正在形成循环。所以，当我从73号盒子开始时，我最终一定会找到73号纸条，因为只有到那时，我才会被指示回到73号盒子，从而闭合循环。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So the only way for you to see only boxes
when you walk into the room
is for every slip to be
contained within a box,
and that necessarily will mean
that we are forming loops.
So when I start with box 73,
I must eventually find slip 73,
because then and only then
will I be directed to go back to box 73
which closes the loop.</p>
</details>

“这监狱的典狱长是谁？你到底在和什么样的施虐狂数学典狱长打交道？这太糟糕了。”

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">- Who is the warden to this prison?
And what kind of sadistic
mathematical warden
are you dealing with here?
This is awful.</p>
</details>

### 外部干预与无限囚犯

现在，如果有一个富有同情心的狱警在任何囚犯进入之前偷偷溜进房间怎么办？那么他们可以通过仅仅交换两个盒子的内容来保证囚犯们的成功。这是因为最多只能有一个长度超过50的循环，你只需交换两个盒子的内容就可以将其一分为二。现在，你就有了两个独立的、长度都小于50的循环。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Now, what if there is a
sympathetic prison guard
who sneaks into the room before
any of the prisoners go in?
Well, then they can guarantee
success for the prisoners
by swapping the contents
of just two boxes.
That's because there
can be at most one loop
that is longer than 50,
and you can break it in half
just by swapping the
contents of two boxes.
And now I have two separate loops
that are each shorter than 50.</p>
</details>

但是，如果有一个恶意的狱警发现了囚犯们要使用这个循环策略怎么办？那么他们可以放置号码，以确保形成一个长度超过50的循环。在这种情况下，囚犯们注定失败吗？

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">But what if there was a malicious guard
who figured out that the prisoners
were going to use this loop strategy?
Well, then they could
put the numbers in boxes
to ensure they formed
a loop longer than 50.
In this case, are the prisoners doomed?</p>
</details>

令人惊讶的是，不会。他们可以通过任意重新编号盒子来反击。例如，他们可以给每个盒子号码加上五。循环是由纸条的位置和盒子号码共同设定的。重新编号盒子本质上与重新分配纸条是相同的。所以问题又回到了随机排列的循环，这意味着囚犯们又回到了31%的生存机会。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Surprisingly, no.
They can counter by arbitrarily
renumbering the boxes.
They could, for example,
add five to each box number.
The loops are set both by
the locations of the slips
and by the box numbers.
Renumbering the boxes
is essentially the same
as redistributing the slips.
So the problem is back to a
random arrangement of loops,
meaning the prisoners are back to their
31% chance of survival.</p>
</details>

现在，如果你增加囚犯的数量会发生什么？我的朋友**马特·帕克**（Matt Parker: 英国数学家、喜剧演员和科普作家）说：“有趣的是，没有人知道随着囚犯数量的增加，它是否会趋于一个极限，或者最终会降到零，或者是什么情况？”

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Now, what happens if you
increase the number of prisoners?
- Fun fact, nobody knows if
as you have more and more prisoners
it's going towards a limit,
or if it'll eventually
go down to zero, or what?
- That is my friend Matt Parker,
and I think what he meant to say
is we know exactly what happens
as you increase the number of prisoners.</p>
</details>

我想他想说的是，我们确切地知道随着囚犯数量的增加会发生什么。如果有1000名囚犯，每人被允许检查500个盒子，你可能会认为他们成功的机会会急剧下降，但你可以像我们之前那样计算，结果是30.74%，只比100名囚犯低了半个百分点。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">With a thousand prisoners each
allowed to check 500 boxes,
you might expect their chance of success
to drop dramatically,
but you can calculate
it like we did before,
and it comes out to 30.74%,
only half a percentage point
lower than for 100 prisoners.</p>
</details>

对于100万名囚犯，成功概率是30.685%，只比10亿名囚犯略高一点。当然，他们更大的问题将是打开所有盒子所需的时间。所以，你赢得这场游戏的概率确实会趋近一个极限。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">For 1 million prisoners,
the probability of success is 30.685%,
which is only a little
higher than for 1 billion.
Of course, their bigger problem would be
the time it takes to open all the boxes.
So your probability of winning this game
does indeed approach a limit.</p>
</details>

那么，这个极限是什么呢？我们一直在使用的公式是1减去失败的几率，即1/51加1/52，依此类推，直到1/100的系列和。我们可以将这个系列描绘成矩形面积的总和，有一条曲线遵循这些块的高度。那条曲线是1/X。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">So what is that limit?
The formula we've been using
is one minus the chance of failure,
which is the series 1
over 51 plus 1 over 52,
and so on, up to 1 over 100.
We can depict this series as
the sum of areas of rectangles,
and there is a curve that follows
the heights of these blocks.
That curve is one over X.</p>
</details>

从50到100的曲线下面积近似于所有矩形的面积。随着囚犯数量趋于无限，它变得越来越好的近似。因此，要找到失败的概率，我们只需计算1/X从n到2n的**积分**（integral: 在微积分中，表示函数在给定区间内的累积量）。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">The area under that curve from 50 to 100
approximates the area
of all the rectangles.
And as the number of
prisoners goes to infinity,
it becomes a better and
better approximation.
So to find the probability of failure,
we can just take the
integral of one over X
from n to 2n.</p>
</details>

我们发现它等于**自然对数2**（natural logarithm of two: 以常数e为底的2的对数）。这给出了1减去自然对数2的成功概率，约为30.7%。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">And we find that it's equal to
the natural logarithm of two.
This gives a probability of success
of one minus the natural log of two,
which is about 30.7%.</p>
</details>

### 结论：循环策略的魅力

底线是，无论你有多少囚犯，使用这个策略，你总会有超过30%的逃脱机会。这感觉真的很不对劲。我的意思是，起初，所有100名囚犯找到自己的号码似乎是根本不可能的。但现在我们看到，你可以有一百、一百万或任何任意大数量的囚犯，他们都有至少30%的机会找到自己的号码。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">The bottom line is
that no matter how many
prisoners you have,
you'll always end up
with above a 30% chance
of escaping using this strategy.
And that feels really wrong.
I mean, at first it seemed
essentially impossible
for all 100 prisoners
to find their numbers.
But now we're seeing that you could have
a hundred, a million,
or any arbitrarily large
number of prisoners
with at least a 30% chance that
they all find their numbers.</p>
</details>

循环策略的魅力在于将每个人的结果联系在一起，而不是每个囚犯都带着自己50%的随机机会进入。遵循相同的循环意味着他们找到自己号码的机会与循环中的其他人完全相同。一旦盒子和纸条被排列好，这个机会就被设定为100%或0%。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">The beauty of the loop strategy
is linking everyone's outcomes together,
instead of each prisoner walking in
with their own 50-50 shot.
Following the same loops
means that they have
the exact same chance
of finding their number
as everyone else in their loop.
And once the boxes and slips are arranged,
that chance is set at either 100% or 0%.</p>
</details>

通过这个策略，你永远不可能在只有少数人找不到号码的情况下接近胜利。你只能彻底失败或完全成功。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">With this strategy, you can't
ever get close to winning
with only a few people
missing their numbers.
You can only fail hard
or succeed completely.</p>
</details>

现在，如果你喜欢解决谜题，即使是在没有生命危险的监狱情境之外，那么你一定会喜欢Brilliant，本视频的赞助商。Brilliant是一个网站和应用程序，它通过引人入胜的互动课程来培养解决问题的能力，涵盖数学和科学领域。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Now, if you like solving puzzles
even outside of life-threatening
prison situations,
well, you'll love Brilliant,
these sponsor of this video.
Brilliant is a website and app
that builds problem-solving skills
and guides you through
engaging interactive lessons
in math and science.</p>
</details>

他们有大量主题的精彩课程，从统计学到天体物理学再到逻辑学。如果你喜欢这个谜题，并想了解更多类似的谜题，我推荐他们的“令人困惑的概率课程”（perplexing probability course），其中包含其他看似不可能的几率，甚至还有另一位数学倾向的典狱长。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">They have great courses on tons of topics,
from statistics to astrophysics to logic.
Now, if you liked this riddle
and you want more just like it,
I'd recommend their
perplexing probability course,
featuring other seemingly impossible odds
and even another mathematically
inclined prison warden.</p>
</details>

他们还有一门“解决问题的乐趣课程”（joy of problem solving course），带你领略他们最令人愉悦的数学谜题。每节课都建立在你之前学到的知识之上，让你对所学的任何课程都有深入的理解。你的知识通过互动实验和测验不断发展和测试。如果你遇到困难，总会有有用的提示。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">They've also got a joy
of problem solving course
to take you through some of their
most delightful math puzzles.
Every lesson builds on
what you learned previously
to give you an in-depth understanding
with any course you take.
Your knowledge is constantly developed
and tested through interactive
experiments and quizzes.
And if you get stuck, there's
always a helpful hint.</p>
</details>

前往brilliant.org/veritasium查看所有这些课程，并在了解了100囚犯谜题后测试你的直觉。如果你现在点击，Brilliant为前200名注册者提供年度高级订阅20%的折扣。所以我要感谢Brilliant对Veritasium的支持，也感谢你的观看。

<details>
<summary>View/Hide Original English</summary>
<p class="english-text">Head over to brilliant.org/veritasium
to check out all these courses
and test your instincts
after learning about
the 100 prisoners riddle.
If you click through right
now, Brilliant are offering
20% off an annual premium subscription
to the first 200 people to sign up.
So I wanna thank brilliant
for supporting Veritasium,
and I want to thank you for watching.</p>
</details>