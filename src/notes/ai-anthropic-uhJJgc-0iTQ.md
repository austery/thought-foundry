---
title: 构建更高效的AI智能体：Anthropic专家洞察
summary: Anthropic专家Alex和Erik深入探讨了如何利用Claude构建高效AI智能体，包括多智能体系统、Claude Code SDK、Skills以及未来的发展方向，强调从简单入手和以用户为中心的设计原则。
area: tech-insights
category: technology
project:
- ai-impact-analysis
tags:
- ai-agents
- ai-development
- anthropic-claude
- code-sdk
- multi-agent-systems
people: []
companies_orgs: []
products_models: []
media_books: []
date: '2025-10-17'
author: Anthropic
speaker: Anthropic
draft: true
guest: ''
insight: ''
layout: post.njk
series: ''
source: https://www.youtube.com/watch?v=uhJJgc-0iTQ
status: evergreen
---
### 引言：Anthropic的智能体研究

Alex: 大家好，我是Alex，Anthropic的Claude关系负责人。今天我们将讨论如何构建更有效的智能体，我的同事也加入了我们。

Erik: 我是Erik，在Anthropic负责多智能体研究。

Alex: Erik，首先请你解释一下，为什么Claude在智能体任务方面表现如此出色？

### Claude在智能体任务中的优势

Erik: 当然。在我们的训练过程中，我们让Claude练习扮演智能体。我们给它开放式问题来解决，它可以在给出最终答案之前采取多个步骤，使用工具，并探索它所处的环境和正在处理的任务。通过大量练习作为智能体，Claude在这方面变得非常擅长。

Alex: 好的，所以这些是长期运行的任务，并且涉及各种领域。通过**RL** (Reinforcement Learning: 一种通过与环境交互来学习最优行为的机器学习方法) 和其他训练机制，Claude正在学习如何基本在有限指导或反馈下完成这些任务的目标。

Erik: 完全正确。我们在编码任务、搜索任务以及许多其他任务上进行了大量的RL，让Claude在不同的环境中练习作为智能体。

### 代码能力与通用智能体

Alex: 我觉得有一种观念，认为Claude模型在代码方面非常强大，但这可能不总是能迁移到其他领域，或者说编码是它自己独立的一件事。你对此有什么看法？

Erik: 编码是我们真正关注的第一个任务，但一旦你拥有了一个出色的编码智能体，它就能完成任何其他类型的工作。

Erik: 如果你需要进行搜索，你可以通过**APIs** (Application Programming Interfaces: 一组定义、协议和工具，用于构建软件应用程序，允许不同软件组件之间进行通信) 进行网络搜索；你可以通过创建日程来规划一个周末。所以我们确实认为编码是智能体的一项非常基础的技能，它将产生大量的溢出效应，使Claude在各种事情上都表现出色。这就像是先训练最难的事情，然后其他一切都会变得容易。

### 通过代码生成文件与自动化

Alex: 最近我看到一个有趣的功能，我们在Claude AI的网页版上发布了，就是Claude能够通过编写代码来创建实际文件。比如，它写了一个Python脚本，然后这个Python脚本运行了，突然你就得到了一个Excel表格。我们未来的发展方向是否就是Claude编写脚本，并在计算机上执行操作来创建文件，或者做一些传统上与代码无关的事情？

Erik: 我认为这是Claude能够完成这些事情的一种非常有效的方式。就在几天前，Claude还在帮我制作演示文稿的图表，它只需编写**SVGs** (Scalable Vector Graphics: 一种基于XML的2D矢量图形格式) 就能创建文件。但我后来想让它制作一个更详细的图表，这需要大量的重复工作，所以Claude实际上通过编写代码来生成SVG，这比Claude自己手动编写要快得多，因为那是一个非常重复的图像文件，包含大量详细的图案。

Alex: 是的。

Erik: 所以，是的，我认为在很多情况下，编写代码来生成一些产物会比直接尝试创建该产物要好得多。对于更复杂的情况，这是一种方法。

Alex: 好的，没错。代码能够带来这种加速，甚至人类在计算机上点击、拖拽和使用鼠标都无法实现。比如重复操作。

Erik: 完全正确，Claude得到了一个for循环。

### Claude Code SDK：简化智能体开发

Alex: 如果你是一名开发者，正在使用Claude构建一个智能体，我们最近看到一个非常受欢迎的功能是**Claude Code SDK** (Software Development Kit: 一套用于创建应用程序的开发工具)。你能给我介绍一下它是什么，以及你看到开发者是如何开始使用它的吗？

Erik: 是的，我们对开发者使用Claude Code SDK感到非常兴奋。以前，如果你想构建一个编码智能体或任何类型的智能体，你必须从零开始，只通过调用**API endpoint** (Application Programming Interface endpoint: API中用于特定功能或数据的网络地址)，自己构建循环、所有工具，执行这些工具，与文件交互，与**MCP** (一种连接Claude与其他系统或工具的机制) 交互。我们基本上已经把所有这些都内置到了Claude Code中。尽管它的名字是Claude Code，但实际上Claude Code只是一个通用智能体，最常用于代码方面。我们鼓励许多开发者将这个SDK作为他们智能体循环的核心。这样，他们就不必花费大量时间重复发明我们已经投入大量时间打磨和完善的核心智能体循环，而是可以直接使用它，然后通过MCP为他们自己的自定义业务逻辑或功能添加工具。

Alex: 好的，所以它提供了这种可定制性，你可以移除与编码相关的部分。

Erik: 完全正确。

Alex: 并放入你需要的任何提示或工具，就像完美地嵌入到框架中一样。

Erik: 是的，我认为人们也一直在将Claude Code用于各种事情。我最奇怪的一次使用Claude Code的经历是，我曾经让它为我计划一次约会，它进行了一系列网络搜索，找到了该地区有趣的活动和餐馆。所以这完全与代码无关，但它拥有所有工具。

Alex: 约会怎么样？

Erik: 相当不错。很棒，是的。

Alex: Claude做得好吗？

Erik: 是的，菲洛利花园，然后附近一家中餐馆。

Alex: 哇，好的。

Erik: Claude做得很好。

Alex: 我很惊讶。

Erik: 是的。

### Claude Skills：赋予智能体更丰富的资源

Alex: 关于Claude Code，另一个我最近看到许多软件工程师使用的热门功能是**Claude MD files** (Anthropic Claude平台中用于定义项目信息和编程风格等相关信息的特定文件)。这些文件是在项目中定义的，它们为Claude提供了关于你的编程风格或目录布局等相关信息。我们现在推出了一个类似的概念，可能更进一步，称为**Skills** (Anthropic Claude平台中一种为智能体提供指令、资源和上下文的机制，可包含各类文件)。你能解释一下Skills是什么，我们如何看到开发者开始使用它们，以及它们对智能体意味着什么？

Erik: 是的，Claude Skills是Claude MD files的一个非常令人兴奋的扩展，它不仅可以提供笔记文件，还可以提供任何类型的文件。这可以是PowerPoint模板文件，可以是代码和你希望它使用的辅助脚本。它还可以是图像或资产。我认为这种不仅提供指令，还提供代理可以使用的资源的扩展是一个非常强大的工具。你可能不仅仅是说“这些是我的PowerPoint演示文稿制作说明”，而是“这里是我们公司所有领导的头像，你可能需要在许多演示文稿中重复使用”，并以可重用的方式将所有这些都提供给Claude。这样它就拥有了所需的一切。

Alex: 我在内部听到一个我非常喜欢的类比，它有点像《黑客帝国》中尼奥第一次学习功夫时，他们给他注入了功夫信息，然后他突然就成了一个功夫大师。这感觉非常像当我给Claude一个技能，比如“这是你如何创建电子表格”，然后突然Claude就像一个银行家一样，可以为我创建财务模型。

Erik: 那还有他们装载所有设备、工具和各种东西的架子，让他们可以拿取。

Alex: 是的。

Erik: 就像，你知道，你可以从这些东西开始，而不仅仅是指令。

Alex: 是的，我喜欢这个。

### 从工作流到多智能体系统

Alex: 稍微换个话题，我们上次几个月前在镜头前聊天时，我们讨论了智能体。当时我们正处于一个从**workflows** (一种预定义好的、按特定顺序串联提示以完成任务的方法)——即如何串联提示的非常明确的方式——到单一智能体系统（即在一个循环中运行模型）的过渡时期。从那时起，这个领域有什么发展？

Erik: 是的，我们确实看到智能体已经取代了工作流，因为Claude在响应反馈和修正自身工作方面变得非常出色，以至于现在智能体循环在大多数你最关心绝对质量的场景中，其性能远远优于工作流。工作流在需要极低延迟，并且你希望Claude只需一次性给出最佳答案的情况下仍然很棒。但智能体现在确实是高性能的。我认为从那时起我看到的一个发展是我称之为“智能体工作流”的东西。以前，一个应用程序可能有一个工作流，让Claude一次性编写一个**SQL command** (Structured Query Language command: 一种用于管理和操作关系数据库的编程语言) 来加载数据，然后进入工作流的另一个步骤，编写一个图表来显示这些数据。如果SQL命令失败，它不知道没有返回任何数据，那么工作流的第二步……

Alex: 对。

Erik: ……就有点搞砸了。

Alex: 彻底崩溃。

Erik: 但现在我看到人们的工作流中，每一步实际上都是一个闭环。它不再是只尝试一次SQL查询，而是运行查询，Claude看到输出，然后它可以继续迭代和重复，直到它知道得到了正确的值，然后才过渡到工作流的下一步。

Alex: 好的，有趣。所以，这种演变，我猜是从串联提示到现在在这些循环中串联智能体本身，我们将拭目以待。最近另一个引起更多讨论的大话题是关于**observability and verification** (可观测性与验证: 指在复杂系统中，能够理解其内部状态、性能和行为，并确保其输出或行为符合预期要求的能力) 的问题。你能解释一下这个挑战是什么，以及人们是如何开始思考它的吗？

### 智能体的可观测性与复杂性管理

Erik: 是的，对于智能体来说，可观测性非常困难，尤其是随着系统变得越来越复杂。我认为这也是我仍然坚信的原因之一：尽管今天的模型比一年前强大得多，它们可以在智能体甚至更复杂的设置中更好地工作，但我认为简单性仍然非常重要。即使你可以构建一个庞大的智能体工作流，你也应该从最简单的事情开始，然后逐步构建一个更复杂的解决方案。这首先意味着尝试单次执行任务，或者尝试向Claude Code SDK发送单次提示，这现在已经是一种非常简单易用的方式。然后，我认为只有在需要时才添加一层又一层的复杂性，因为那会使可观测性变得更加困难。

Alex: 另一个与智能体工作流并行使用的术语可能是**multi-agent** (多智能体系统: 指多个智能体协同工作以解决复杂问题的系统)。它们是同一件事，还是有所不同？

Erik: 是的，多智能体是我现在主要的研究领域。我想说它与智能体工作流有很大的不同。

Alex: 好的。

Erik: 智能体工作流中，一个智能体完成任务，然后它的输出会传递给下一个智能体来处理。多智能体则是指从根本上说，你有多个智能体或多个Claude同时工作，例如一个父智能体将任务委托给五个子智能体，每个子智能体都可以并行工作。我们的深度研究搜索产品就是这样运作的：主要的编排智能体会决定并创建几个子智能体。它们可以并行进行大量的搜索，这对于用户来说要好得多，因为所有这些都并行发生，你很快就能得到答案。我们还在Claude Code中看到，模型会使用子智能体。所以，如果某个子任务需要数万个token，比如查找某个类的特定实现，但答案实际上归结为非常小的东西，它可以在子智能体中完成这项工作，以保护主上下文免受所有那些对主要工作不必要的token的影响。所以，是的，基本上可以卸载这部分工作，然后只获取它需要的最终答案。

### 智能体管理与工具调用

Alex: 那么在这种情况下，我们是否将这个子智能体暴露为Claude可以调用的一个工具？

Erik: 完全正确。

Alex: 传递进去，它会把提示作为参数之类的传递进去吗？

Erik: 完全正确，是的。所以对Claude来说，子智能体就像一个工具，它可以将提示传递给子智能体，然后子智能体就会去完成工作。我研究的一部分就是训练Claude成为一个更好的管理者，并知道如何……

Alex: 哦，有趣。

Erik: ……向它的子智能体给出清晰的指令，并确保它们能从中得到正确的东西和需求。

Alex: 这与工具调用有什么不同，或者说这可能是工具调用整体的一个专业化部分，还是在某些方面有所不同？

Erik: 我会说这使用了工具调用的框架作为通信协议，而它碰巧是一个本身由Claude——由另一个Claude——支持的工具。

Alex: Claude对子智能体是否有直观的理解，还是我们必须教它？比如，你实际上是在和另一个版本的自己说话，Claude，不要惊慌之类的？

Erik: 我会说Claude会犯很多第一次当经理的人会犯的错误，比如它会给出不完整或有些不明确的指令。

Alex: 对，对。

Erik: 给子智能体。

Alex: 对。

Erik: 而且，你知道，它会期望子智能体拥有正确的上下文，而实际上它并没有。我认为我们在子智能体训练中看到的是，Claude开始变得更加冗长和详细，并向其子智能体提供正在发生的事情的整体上下文。

Alex: 有趣。

Erik: 这样它们就能做得更好，从而对整体有所贡献。所以，我想说，Claude当然有很多东西要学，并且正在学习如何在这方面做得更好。

### 多智能体用例与未来展望

Alex: 好的，酷。

Erik: 是的。

Alex: 这里有哪些用例？搜索是其中之一，还有像保护上下文这样的。现在人们还在用多智能体做什么？

Erik: 是的，我认为编码方面有很多子智能体的应用。任何可以并行化或**MapReduced** (MapReduce: 一种编程模型，用于大规模数据集的并行分布式处理) 的任务。如果你需要产生大量输出，或者你正在创建的某些输出可能有10个部分，如果你能将它们分配给10个子智能体，这对于节省上下文和获得更快的结果会非常非常有效。我认为还有很多有趣的事情可以探索，那就是将多智能体作为一种**test-time compute** (测试时计算: 指在模型推理或测试阶段执行额外计算以提升性能或鲁棒性的策略) 的形式。

Alex: 基本上，让Claude——许多Claude——共同解决一个问题，可以让你得到比单个Claude更好的最终答案。就像人们一样，一群人集思广益可以得到更好的结果。

Alex: 在这种情况下，我们是否以任何方式专门化这些智能体？我们是否将它们导向某种特定的人格，还是任由它们采取任何形式？

Erik: 我认为两者都可以。有时，给一群人完全相同的任务，看看他们得出什么不同的答案会很有帮助。有时，让许多人或许多智能体从不同方法解决同一个问题，或者将其分解开来会很好。我经常看到的一种情况是，客户拥有很多工具，可能100或200个工具，他们希望智能体使用这些工具。他们发现将这些工具分配给子智能体非常有效。这样主智能体只需知道“嘿，我想使用这组工具”，然后就会有一个子智能体去那里做实际工作。这样每个子智能体只需理解和知道如何使用大约20个工具。

Alex: 我们有没有尝试过将智能体扩展到极致？比如，如果有一千个版本的Claude都在解决一个问题，会变成一片混乱吗？

Erik: 我还没试过。

Alex: 好的。

Erik: 但我会给你回复。

Alex: 这是一个很好的研究方向。目前我们还看到智能体或多智能体有哪些其他的失败模式？

Erik: 是的，我认为就像任何复杂的系统一样，很容易过度构建，从而失去很多效率，并制造出很多“死重”。我曾见过过度构建的多智能体系统花费太多时间彼此来回沟通，而没有在主要任务上取得实际进展。人类智能体或人类组织也会遇到这种问题。随着公司规模变大，沟通开销会增加，而实际在地面上取得进展的人员所做的工作会越来越少。

Alex: 所以，我认为这是另一个值得研究的有趣问题：我们如何才能让“Claude组织”非常高效，同时保持较小的开销？

### 开发者构建智能体的最佳实践

Alex: 如果我是一名开发者，想要开始使用智能体，无论我是基于Claude Code SDK进行构建，还是尝试自己动手，你有什么建议或最佳实践可以分享吗？

Erik: 是的，我认为最佳实践仍然是：从简单开始，并且只添加你需要的复杂性。我认为另一个非常重要的事情是站在你的智能体的角度思考。如果你给Claude工具、提示或任何功能，请设身处地为Claude着想，阅读它实际得到的东西，作为模型它看到了什么，并确保其中有足够的信息来解决问题。我们很容易忘记我们看到了一切，而模型只看到我们展示给它的东西。

Alex: 对。

Erik: 而且……

Alex: 是的。

Alex: 我觉得总是很重要的一点是，回到你的工具调用和日志等的原始记录中去查看。

Erik: 完全正确。我认为另一件事是，随着人们构建更多像**MCPs** (一种连接Claude与其他系统或工具的机制) 这样的东西，并尝试将Claude连接到更多事物，人们一个非常自然但错误的本能是，MCP或工具应该与你的**API** (Application Programming Interface: 应用程序编程接口) 一一对应。而我认为，模型的工具或MCPs实际上应该与你的**UI** (User Interface: 用户界面) 一一对应，而不是你的API。因为归根结底，模型是这些东西的用户。它不像传统的程序那样工作。所以，如果你的API可能有三个独立的端点，比如说，用于加载Slack对话，将用户ID转换为用户名，以及将频道ID转换为频道名。如果这些是你提供给模型以理解Slack的工具，那么为了理解任何东西，它将不得不进行三次工具调用。而作为一个用户，我们只会看到所有东西都 nicely rendered。

Alex: 哦，这很有趣。

Erik: 所以你想要为模型创建一个工具或MCP，让它一次性呈现所有内容，并尽可能减少交互。就像对于用户来说，如果你每次使用Slack都必须点击用户ID才能看到名字等等，那将是非常糟糕的体验。

Alex: 对，对，我喜欢这个。所以有点像从最终状态倒推，而不是试图将技术规范一一映射。

Erik: 完全正确，并用你需要的任何上下文来围绕它。

### 智能体的未来：自我验证与通用计算机使用

Alex: 你认为智能体的未来会怎样？对未来六到十二个月有什么预测吗？

Erik: 我认为智能体将变得更加普及，首先会从像软件工程这样可验证的领域开始。编码智能体已经改变了我的工作方式以及Anthropic许多人的工作方式，我认为这方面仍有巨大的潜力可挖掘。我认为一个真正令人兴奋的事情是，如果智能体能通过像计算机使用这样的方式，更好地验证自己的工作。它们可以编写一个网络应用，但它们能否真正打开它并测试它，然后自己发现错误，而不是需要你来做这些？我认为这是最令人兴奋的事情之一。

Alex: 是的。

Erik: 就像关闭测试的循环，这样我就不必成为Claude的**QA engineer** (Quality Assurance engineer: 质量保证工程师，负责确保产品质量和测试软件以发现缺陷) 了。

Alex: 对，所以一旦我们将软件工程能力和计算机使用能力结合起来，就能把所有这些东西整合在一起。

Erik: 是的，而且我认为计算机使用也将真正开启许多其他领域和方向，这些是智能体迄今为止被排除在外的。

Alex: 能举个例子吗？

Erik: 如果你想让Claude在Google文档中为你完成工作。

Alex: 是的。

Erik: 现在，Claude可以为你写作，但你需要在两者之间来回复制粘贴。

Alex: 对。

Erik: 但如果你有计算机使用功能，你说：“嘿Claude，你能清理一下这个Google文档吗？”它就可以直接为你完成——滚动、点击、编辑文本。这比来回复制粘贴的体验要好得多。

Alex: 是的。

Erik: 就像无论你在哪里，如果Claude拥有计算机使用能力，它就能与你同在。

Alex: 嗯，我非常期待让Claude为我写Google文档，并回复我所有的评论。

Erik: 完全正确。

Alex: 那将是一个非常美好的未来。

Alex: Erik，这次交流非常棒。非常感谢你的对话。

Erik: 绝对的，谢谢你。