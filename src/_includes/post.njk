---
layout: "base.njk"
---

<div class="report-container">
    
  <aside id="toc-container" class="sidebar-toc"></aside>
  
  <main id="content-body" class="main-content">
    
    {# ------------------- 新增的元数据块代码开始 ------------------- #}

    <div class="metadata-block">
      {# 使用 if 判断，只有当数据存在时才显示这一行 #}
      {% if speaker %}
        <p><strong>主讲人:</strong> 
          {# 处理多个演讲者的情况，用逗号分隔 #}
          {% set speakers = speaker.split(',') %}
          {% for speakerName in speakers %}
            {% set trimmedSpeaker = speakerName.trim() %}
            {% if trimmedSpeaker != '' %}
              {% set speakerUniqueKey = trimmedSpeaker | getSpeakerUniqueKey(collections) %}
              <a class="speaker-link" href="{{ ('/speakers/' + (speakerUniqueKey | slug) + '/') | url }}">{{ trimmedSpeaker }}</a>{% if not loop.last %}, {% endif %}
            {% endif %}
          {% endfor %}
        </p>
      {% endif %}

      {% if guest %}
        <p><strong>嘉宾:</strong> 
          {# 处理多个嘉宾的情况，用逗号分隔 #}
          {% set guests = guest.split(',') %}
          {% for guestName in guests %}
            {% set trimmedGuest = guestName.trim() %}
            {% if trimmedGuest != '' %}
              {% set guestUniqueKey = trimmedGuest | getSpeakerUniqueKey(collections) %}
              <a class="speaker-link" href="{{ ('/speakers/' + (guestUniqueKey | slug) + '/') | url }}">{{ trimmedGuest }}</a>{% if not loop.last %}, {% endif %}
            {% endif %}
          {% endfor %}
        </p>
      {% endif %}

      {% if source %}
        <p><strong>来源:</strong> <a href="{{ source }}" target="_blank">查看</a></p>
      {% endif %}

      {% if channel %}
        <p><strong>频道:</strong> <a href="{{ channel }}" target="_blank">查看</a></p>
      {% endif %}
      
      {# 关键字部分，我们直接遍历这篇文章的 tags #}
      {% if tags %}
        <p><strong>关键字:</strong> 
          {% for tag in tags %}
            <a class="tag-link" href="{{ ('/tags/' + (tag | slug) + '/') | url }}">{{ tag }}</a>
          {% endfor %}
        </p>
      {% endif %}
    </div>

    {# ------------------- 新增的元数据块代码结束 ------------------- #}

    {{ content | safe }}
  </main>

</div>

<script src="{{ '/js/post.js' | url }}"></script>